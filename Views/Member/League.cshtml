@model CornerkickWebMvc.Models.LeagueModels

@{
  ViewBag.Title = "Liga";
  Layout = "~/Views/Shared/_Layout.cshtml";
}

<html style="height: 100%; min-height: 100%">
<head>
  <link rel="stylesheet" href="~/Content/DataTables/css/jquery.dataTables.min.css" />
  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="~/Content/mystyles.css" />
  <script type="text/javascript" src="~/Scripts/jquery-2.0.0.min.js"></script>
  <script type="text/javascript" src="~/Scripts/jquery-ui-1.12.1.min.js"></script>
  <script type="text/javascript" src="~/Scripts/DataTables/jquery.dataTables.min.js"></script>
  <script type="text/javascript" src="~/Scripts/canvasjs.min.js"></script>
  <script type="text/javascript" src="~/Scripts/Scorer.js"></script>
  <script type="text/javascript" src="~/Scripts/League.js"></script>

  <script>
    var oTableLeague;
    var oTableScorer;

    $(document).ready(function () {
      iniLeague();

      // Radio-buttons league
      $("#rbTableTotal").on('change', function (ev) {
        setLeague2();
      });

      $("#rbTableH").on('change', function (ev) {
        setLeague2();
      });

      $("#rbTableA").on('change', function (ev) {
        setLeague2();
      });
    });

    function plotLeaguePlaceGraph(iSeason) {
      var fLigaMax = @Html.Raw(Json.Encode(Model.iLeagueSize));
      fLigaMax = fLigaMax + 0.1;

      $.ajax({
        type: 'post',
        url: '/Member/GetLeaguePlaceHistory',
        dataType: "json",
        data: { iSeason: iSeason },
        success: function (ltPlace) {
          var chart = new CanvasJS.Chart("chartContainerPlaceHist", {
            animationEnabled: true,
            theme: "theme2",//theme1
            axisX: {
              labelFontSize: 16,
              lineThickness: 0,
              gridThickness: 1,
              interval: 1,
              minimum: 0.9
            },
            axisY: {
              labelFontSize: 16,
              interval: 1,
              minimum: 0.9,
              maximum: fLigaMax,
              reversed: true
            },
            /*legend: {
              horizontalAlign: "center", // left, center ,right
              verticalAlign: "bottom",  // top, center, bottom
              dockInsidePlotArea: true
            },*/
            data: [
              {
                // Change type to "bar", "splineArea", "area", "spline", "pie",etc.
                type: "line",
                showInLegend: false,
                legendText: "Tabellenplatz",
                dataPoints: ltPlace
              }
            ]
          });

          chart.render();
        }
      });
    }
  </script>
</head>

<body style="height: 100%; min-height: 100%">
  <div style="position: relative; width: 100%; height: 100%; min-height: 100%; margin-bottom: 20px; float: left">
    <label style="margin-right: 10px">
      Saison:
      @Html.DropDownListFor(m => m.iSeason, Model.ddlSeason, new { @class = "form-horizontal", @onchange = "changeLand()", id = "ddlSeason" })
    </label>

    <label style="margin-right: 10px">
      Land:
      @Html.DropDownListFor(m => m.iLand, Model.ddlLand, new { @class = "form-horizontal", @onchange = "changeLand()", id = "ddlLand" })
    </label>

    <label style="margin-right: 10px">
      Liga:
      @Html.DropDownListFor(m => m.iDivision, Model.ddlDivision, new { @class = "form-horizontal", @onchange = "changeLand()", id = "ddlDivision" })
    </label>

    <label>
      Spieltag:
      <a class="noselect" style="cursor: pointer" onclick="changeMatchday(-1, document.getElementById('ddlMatchday'), setLeague2)">&nbsp;< &nbsp;</a>
      <select id="ddlMatchday" onchange="setLeague2()"></select>
      <a class="noselect" style="cursor: pointer" onclick="changeMatchday(+1, document.getElementById('ddlMatchday'), setLeague2)">&nbsp;> &nbsp;</a>
    </label>

    <div style="position: relative; width: 100%; height: auto; margin-bottom: 20px">
      <div style="position: relative; width: 47%; min-width: 350px; margin-right: 6%; margin-bottom: 20px; float: left">
        <div id="tableDivTeams" style="position: relative"></div>
      </div>

      <div style="position: relative; width: 47%; min-width: 350px; float: left">
        <h4>Tabelle</h4>
        <div style="position: absolute; width: 250px; top: 10px; right: 0px; text-align: right">
          <form>
            <fieldset>
              <label style="font-size:100%; color: black; margin-right: 4%">
                <input type="radio" id="rbTableTotal" name="rbTableHA" value="0" checked>
                Gesamt
              </label>
              <label style="font-size:100%; color: black; margin-right: 4%">
                <input type="radio" id="rbTableH" name="rbTableHA" value="1">
                Heim
              </label>
              <label style="font-size:100%; color: black; margin-right: 4%">
                <input type="radio" id="rbTableA" name="rbTableHA" value="2">
                Auswärts
              </label>
            </fieldset>
          </form>
        </div>

        <div id="divTableLeague" style="position: relative; width: 100%"></div>
      </div>
    </div>

    <div style="height: auto; width: 54%; min-width: 350px; margin-top: 20px; float: right">
      <h4>Tabellenplatzentwicklung</h4>
      <div id="chartContainerPlaceHist" style="height: 400px; width: 100%"></div>
    </div>

    <div id="divLeagueScorer" style="width: 40%; min-width: 350px; height: auto; float: left"></div>
  </div>
</body>
</html>
