@model CornerkickWebMvc.Models.LeagueModels

@{
  ViewBag.Title = "Liga";
  Layout = "~/Views/Shared/_Layout.cshtml";
}

<html style="height: 100%; min-height: 100%">
<head>
  <script type="text/javascript" src="~/Scripts/canvasjs.min.js"></script>
  <script type="text/javascript" src="~/Scripts/League.js"></script>

  <script>
    $(document).ready(function () {
      changeLand(1, 0);
      
      var fLigaMax = @Html.Raw(Json.Encode(Model.iLeagueSize));
      fLigaMax = fLigaMax + 0.1;

      $.get("/Member/GetLeaguePlaceHistory/", function (ltPlace) {
        var chart = new CanvasJS.Chart("chartContainerPlaceHist", {
          animationEnabled: true,
          theme: "theme2",//theme1
          axisX: {
            labelFontSize: 16,
            lineThickness: 0,
            gridThickness: 1,
            interval: 1,
            minimum: 0.9
          },
          axisY: {
            labelFontSize: 16,
            interval: 1,
            minimum: 0.9,
            maximum: fLigaMax,
            reversed: true
          },
          /*legend: {
            horizontalAlign: "center", // left, center ,right
            verticalAlign: "bottom",  // top, center, bottom
            dockInsidePlotArea: true
          },*/
          data: [
            {
              // Change type to "bar", "splineArea", "area", "spline", "pie",etc.
              type: "line",
              showInLegend: false,
              legendText: "Tabellenplatz",
              dataPoints: ltPlace
            }
          ]
        });

        chart.render();
      });
    });
  </script>
</head>

<body style="height: 100%; min-height: 100%">
  @{
    var sLand = "";
    if (Model.iLand >= 0 && Model.iLand < MvcApplication.ckcore.sLand.Length) {
      sLand = MvcApplication.ckcore.sLand[Model.iLand];
    }
    var sLiga = (Model.iSpKl + 1).ToString();
  }

  <div style="position: relative; width: 100%; height: 100%; min-height: 100%; margin-bottom: 20px; float: left">
    <label>
      Land:
      @Html.DropDownListFor(m => m.iLand, Model.ddlLand, new { @class = "form-horizontal", @onchange = "changeLand(1, 0)", id = "ddlLand" })
    </label>

    <label style="margin-left: 10px">
      Spieltag:
      <select id="ddlMatchday" onchange="setLeague2(1, 0)"></select>
    </label>

    <div style="position: relative; width: 100%; height: auto; margin-bottom: 4%">
      <div style="position: relative; width: 47%; min-width: 350px; margin-right: 6%; margin-bottom: 20px; float: left">
        <h4>Begegnungen</h4>
        <div id="tableDivTeams" style="position: relative"></div>
      </div>
      <div style="position: relative; width: 47%; min-width: 350px; float: left">
        <h4>Tabelle</h4>
        <div id="tableDivLeague" style="position: relative; width: 100%"></div>
      </div>
    </div>

    <div style="width: 40%; min-width: 350px; margin-right: 6%; height: auto; margin-top: 20px; float: left">
      @{
        if (Model.ltScorer != null && Model.ltScorer.Count > 0) {
          <h4>Torschützen</h4>
          <table class="tStat" style="width: auto" border="0" cellpadding="2" summary="Torschuetzen">
            <tr>
              <th>#</th>
              <th>Spieler</th>
              <th>Verein</th>
              <th style="text-align:right">Tore</th>
              <th style="text-align:right">Vorl.</th>
              <th style="text-align:right">Scor.</th>
            </tr>

            @{ int iPlatz = 0; }
            @{
              foreach (CornerkickManager.UI.Scorer sc in Model.ltScorer) {
                iPlatz++;
                string sStyle2 = "";
                if (MvcApplication.ckcore.ltPlayer[sc.iId].iClubId == Model.iClubId) {
                  sStyle2 = "font-weight:bold";
                }
                int iScorer = sc.iGoals + sc.iAssists;

                <tr style=@sStyle2 class=" ">
                  <td class="first">@iPlatz</td>
                  <td>@sc.sName</td>
                  <td>@sc.sTeam</td>
                  <td align="right">@sc.iGoals</td>
                  <td align="right">@sc.iAssists</td>
                  <td align="right">@iScorer</td>
                </tr>
              }
            }
          </table>
        }
      }
    </div>

    <div style="height: auto; width: 54%; min-width: 350px; margin-top: 20px; float: left">
      <h4>Tabellenplatzentwicklung</h4>
      <div id="chartContainerPlaceHist" style="height: 400px; width: 100%"></div>
    </div>
  </div>
</body>
</html>
